<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="group">

	<select id="selectOneGroup" resultType="group">
		select
			*
		from
			group_
		 where
		 	group_id = #{groupId}
	</select>
	<insert id="insertOneGroup">
		insert into
			group_
		values(
    		#{groupId},
    		#{groupName},
    		#{leaderId},
    		default,
    		default,
    		#{hashtag},
    		#{image}
		)
		
	</insert>
	
	<select id="selectGroupEnrolled" resultMap="groupMemberListMap">
		select
			* 
		from
			group_member_list
		where
			group_id = #{groupId}
			and
		member_id = #{memberId}
	</select>
	
	<resultMap type="map" id="groupMemberListMap">
		<result column="group_id" property="groupId"/>
        <result column="member_id" property="memberId"/>
        <result column="member_level_code" property="memberLevelCode"/>
	</resultMap>
	
	<select id="selectGroupList" resultType="group">
	select
    	g.*
	from
    	group_ g join group_member_list gml
        	on g.group_id = gml.group_id
	where
    	gml.member_id = #{id}
	</select>

	<insert id="insertGroupBoard">
		insert into
			group_board
		values(
			seq_group_board.nextVal,
			#{groupId},
			#{writer},
			#{content},
			default,
			default,
			#{placeName},
			#{placeAddress},
			#{image},
			#{tagMembers}			
		)
	</insert>
	
</mapper>

